version: 1
agent:
  enabled: true

  environment:
    python_version: "3.11"
    node_version: "20.x"
    preinstalled_tools:
      - pip
      - poetry
      - npm
      - netlify-cli
      - requests
      - toml
      - aiohttp
    env_vars:
      - name: BRIDGE_ENV
        value: "production"
      - name: NETLIFY_API
        value: "https://api.netlify.com"
      - name: BRIDGE_BACKEND
        value: "https://bridge.sr-aibridge.com"
      - name: BRIDGE_DIAGNOSTICS
        value: "https://diagnostics.sr-aibridge.com"

  firewall:
    mode: "custom"
    allowlist:
      - https://api.netlify.com
      - https://bridge.sr-aibridge.com
      - https://diagnostics.sr-aibridge.com
      - https://registry.npmjs.org
      - https://pypi.org
      - https://nodejs.org
      - https://cdn.jsdelivr.net
      - https://raw.githubusercontent.com
      - https://github.com
    blocklist:
      - https://example.com

  diagnostics:
    logging_level: "info"
    watchdog_integration: true
    report_frequency: "per_run"
    triage:
      enabled: true
      alert_on_failures: true
      report_path: "bridge_backend/logs/copilot_diagnostics.log"

telemetry:
  enabled: true
  emit_to:
    - "https://diagnostics.sr-aibridge.com"
  anonymize_repo_name: false
  include_environment_details: true
