# GitHub Copilot Agent Configuration
version: 1.1
firewall:
  allowlist:
    - "api.github.com"
    - "api.netlify.com"
    - "bridge.sr-aibridge.com"
    - "diagnostics.sr-aibridge.com"
    - "render.com"
    - "registry.npmjs.org"
    - "pypi.org"
    - "nodejs.org"
    - "cdn.jsdelivr.net"
    - "raw.githubusercontent.com"
    - "github.com"
  block_unknown_hosts: true
  log_unknown_access: true
  log_path: "logs/copilot_firewall.log"

env:
  NODE_ENV: production
  PYTHONPATH: "${{ github.workspace }}"
  BRIDGE_URL: "${{ secrets.BRIDGE_URL }}"
  NETLIFY_SITE_ID: "${{ secrets.NETLIFY_SITE_ID }}"
  NETLIFY_AUTH_TOKEN: "${{ secrets.NETLIFY_AUTH_TOKEN }}"
  ACTIONS_ALLOW_UNSECURE_COMMANDS: true

setup:
  run_before_firewall: true
  auto_update_packages: true
  ensure_tools:
    - python3
    - pip
    - node
    - npm

# Diagnostics and telemetry configuration
diagnostics:
  logging_level: "info"
  watchdog_integration: true
  report_frequency: "per_run"
  triage:
    enabled: true
    alert_on_failures: true
    report_path: "logs/copilot_diagnostics.log"

telemetry:
  enabled: true
  emit_to:
    - "https://diagnostics.sr-aibridge.com"
  anonymize_repo_name: false
  include_environment_details: true
