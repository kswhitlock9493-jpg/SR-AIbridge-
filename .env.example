# SR-AIbridge Example Environment
# Replace <PLACEHOLDER> values with real ones only in dashboard
# Copy this file to .env and update with your values

# ===== Backend API Configuration =====
BRIDGE_API_URL=<YOUR_BACKEND_URL_HERE>

# ====== Database ======
DATABASE_URL=postgresql+asyncpg://sr_bridge_user:SRsecure@render-db:5432/sr_aibridge_main
# For SQLite (Development):
# DATABASE_URL=sqlite+aiosqlite:///./bridge_local.db

# ====== Environment ======
PYTHON_VERSION=3.11.9
NODE_ENV=production
LOG_LEVEL=info
# PORT is injected by Render automatically at runtime
# For local development, set PORT=8000 or PORT=10000
PORT=8000

# ====== Runtime Mode ======
CASCADE_MODE=active
CONFIDENCE_MODE=strict
TRIAGE_AUTO_REPAIR=true

# ===== Security =====
# SECRET_KEY is used for encryption and token signing
# Generate a secure random key for production (32+ characters)
SECRET_KEY=<YOUR_SECRET_KEY_HERE>

# SEED_SECRET is used for the /system/seed/bootstrap endpoint
# Generate a secure random key for production
SEED_SECRET=<YOUR_SEED_SECRET_HERE>

# ===== Logging =====
# LOG_LEVEL controls verbosity: debug, info, warn, error
LOG_LEVEL=info

# ===== CORS Configuration =====
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,https://bridge.netlify.app,https://sr-aibridge.netlify.app
CORS_ALLOW_ALL=false

# ===== Bridge Services =====
# Vault API endpoint for bridge operations
VAULT_URL=<YOUR_VAULT_URL_HERE>

# CASCADE_MODE controls the bridge operation mode
# Options: development, production, active
CASCADE_MODE=<MODE_HERE>

# FEDERATION_SYNC_KEY is used for secure federation synchronization
# Generate a secure random key for production use (32+ characters)
FEDERATION_SYNC_KEY=<YOUR_FEDERATION_SYNC_KEY_HERE>

# ===== Application Settings =====
DEBUG=true
PORT=8000

# ===== Optional Monitoring =====
# Datadog integration for production monitoring
DATADOG_API_KEY=<YOUR_DATADOG_API_KEY_HERE>
DATADOG_REGION=us

# HEARTBEAT_URL is optional; heartbeat will auto-detect from RENDER_EXTERNAL_URL
# or skip external pings if neither is set
# HEARTBEAT_URL=https://your-app.onrender.com/health

# ===== Diagnostics =====
AUTO_DIAGNOSE=true
DIAGNOSE_WEBHOOK_URL=
IMPORT_DIAGNOSTICS=true

# ===== Secure Data Relay Protocol =====
# Enable/disable automatic email archival before deletion
RELAY_ENABLED=false

# Email destination for data relay
RELAY_EMAIL=sraibridge@gmail.com

# Relay mode: "pre_delete" (archive before deletion) or "post_delete" (archive after)
RELAY_MODE=pre_delete

# Local backup path for relay queue (failed sends)
RELAY_BACKUP_PATH=./vault/relay_queue

# ===== SMTP Configuration (for email relay) =====
# Gmail SMTP settings (requires App Password if 2FA enabled)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true

# Alternative SMTP providers:
# SendGrid: SMTP_HOST=smtp.sendgrid.net, SMTP_PORT=587
# Mailgun: SMTP_HOST=smtp.mailgun.org, SMTP_PORT=587
# AWS SES: SMTP_HOST=email-smtp.region.amazonaws.com, SMTP_PORT=587

# ===== Env Steward v1.9.6l - Admiral-tier Environment Orchestration =====
# Enable/disable the Steward engine
STEWARD_ENABLED=true

# Enable write mode (admiral-only, requires capability tokens)
STEWARD_WRITE_ENABLED=false

# Capability token lifetime in seconds (default: 600 = 10 minutes)
STEWARD_CAP_TTL_SECONDS=600

# Admiral/owner handle (only this user can issue capabilities and apply changes)
STEWARD_OWNER_HANDLE=kswhitlock9493-jpg

# Provider toggles (safe to leave false until you want write-mode)
STEWARD_RENDER_ENABLED=false
STEWARD_NETLIFY_ENABLED=false
STEWARD_GITHUB_ENABLED=false

# Provider identifiers (non-secret, safe to include)
RENDER_SERVICE_ID=srv-d39k3ejuibrs73etqnag
NETLIFY_SITE_ID=
GITHUB_REPO_SLUG=kswhitlock9493-jpg/SR-AIbridge-

# Provider API tokens (secret - leave blank unless enabling write-mode)
# DO NOT paste secrets in logs; add values only in Render/Netlify/GitHub dashboards
RENDER_API_TOKEN=
NETLIFY_AUTH_TOKEN=
GITHUB_TOKEN=

# ===== HXO (Hypshard-X Orchestrator) v1.9.6n =====
# Enable/disable HXO engine
HXO_ENABLED=false

# Safety/timebox settings
HXO_DEFAULT_SLO_MS=120000          # Default stage SLO (2 minutes)
HXO_SHARD_TIMEOUT_MS=15000         # Per-shard watchdog timeout (15 seconds)
HXO_MAX_CONCURRENCY=64             # Maximum parallel shard execution
HXO_MAX_SHARDS=1000000             # Hard cap on total shards per plan

# Adaptivity/auto-tuning
HXO_AUTOSPLIT_P95_MS=8000          # Split shards if p95 latency exceeds 8 seconds
HXO_AUTOSPLIT_FACTOR=4             # Split each hot shard into 4 sub-shards

# Storage paths
HXO_DB_PATH=bridge_backend/.hxo/checkpoints.db
HXO_ARTIFACTS_DIR=bridge_backend/.hxo/artifacts

# RBAC
HXO_ALLOW_CAPTAIN_VIEW=true        # Allow Captains to view HXO status and reports
