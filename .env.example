# ==========================================================================================
# SR-AIbridge Environment Configuration Template
# SOVEREIGN DOMINION TOKEN FORGE INTEGRATION v2.0.0
# ==========================================================================================
#
# IMPORTANT: This repository uses the Sovereign Dominion Token Forge (SDTF) for secret management.
# ALL SECRETS are managed via ephemeral tokens - DO NOT add plaintext secrets to .env files.
#
# To set up your environment:
# 1. Copy this file to .env
# 2. Set FORGE_DOMINION_ROOT in GitHub Secrets (or export locally)
# 3. Run: bash runtime/pre-deploy.dominion.sh to mint tokens
# 4. Provider tokens (GitHub, Netlify) are auto-generated at runtime
# 5. Deploy using BRH (Bridge Runtime Handler) for sovereign infrastructure
#
# ==========================================================================================

# ===== Forge Dominion Configuration =====
# This is the ONLY secret you need to set (in GitHub Secrets or locally)
# Generate with: python -c "import base64, os; print(base64.urlsafe_b64encode(os.urandom(32)).decode().rstrip('='))"
FORGE_DOMINION_ROOT=<SET_IN_GITHUB_SECRETS>
FORGE_DOMINION_MODE=sovereign
FORGE_DOMINION_VERSION=2.0.0

# ===== Backend API Configuration =====
# Override with BACKEND_URL or BRIDGE_URL in your environment
BRIDGE_API_URL=${BACKEND_URL:-${BRIDGE_URL:-https://bridge.sr-aibridge.com}}

# ===== BRH (Bridge Runtime Handler) Configuration =====
# Sovereign deployment using self-hosted Docker infrastructure
BRH_ENABLED=true
BRH_ALLOW_UNSIGNED=false
BRH_ALLOWED_ORIGINS=*

# ====== Database ======
# For Production (managed by platform):
DATABASE_URL=<PLATFORM_MANAGED>
# For SQLite (Development):
# DATABASE_URL=sqlite+aiosqlite:///./bridge_local.db

# ====== Environment ======
PYTHON_VERSION=3.11.9
NODE_ENV=production
LOG_LEVEL=info
PORT=8000

# ====== Runtime Mode ======
CASCADE_MODE=active
CONFIDENCE_MODE=strict
TRIAGE_AUTO_REPAIR=true

# ===== Security - MANAGED BY FORGE DOMINION =====
# These secrets are auto-generated by Token Forge - DO NOT set manually
SECRET_KEY=<FORGE_MANAGED>
SEED_SECRET=<FORGE_MANAGED>
FEDERATION_SYNC_KEY=<FORGE_MANAGED>

# ===== Logging =====
LOG_LEVEL=info

# ===== CORS Configuration =====
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,https://bridge.netlify.app,https://sr-aibridge.netlify.app
CORS_ALLOW_ALL=false

# ===== Bridge Services =====
VAULT_URL=https://sr-aibridge.netlify.app/api/vault
CASCADE_MODE=production

# ===== Application Settings =====
DEBUG=false
PORT=8000

# ===== Genesis Framework - v1.9.7s Full Engine Activation =====
# engines_enable_true: Permanent Full Activation Protocol
# All engines start by default under RBAC & Truth certification
ENGINES_ENABLE_TRUE=true
GENESIS_MODE=enabled
LINK_ENGINES=true
BLUEPRINTS_ENABLED=true

# RBAC and Safety
RBAC_ENFORCED=true
ENGINE_SAFE_MODE=true
AUTO_DIAGNOSE=true
AUTO_HEAL_ON=true
TRUTH_CERTIFICATION=true

# ===== Diagnostics =====
AUTO_DIAGNOSE=true
IMPORT_DIAGNOSTICS=true

# ===== Secure Data Relay Protocol =====
RELAY_ENABLED=false
RELAY_EMAIL=sraibridge@gmail.com
RELAY_MODE=pre_delete
RELAY_BACKUP_PATH=./vault/relay_queue

# ===== SMTP Configuration (for email relay) =====
# MANAGED BY FORGE DOMINION - tokens auto-generated
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=<FORGE_MANAGED>
SMTP_PASSWORD=<FORGE_MANAGED>
SMTP_USE_TLS=true

# ===== Env Steward v2.0.0 - Admiral-tier Environment Orchestration =====
STEWARD_ENABLED=true
STEWARD_WRITE_ENABLED=false
STEWARD_CAP_TTL_SECONDS=600
STEWARD_OWNER_HANDLE=kswhitlock9493-jpg

# Provider toggles (safe to leave false until you want write-mode)
STEWARD_NETLIFY_ENABLED=false
STEWARD_GITHUB_ENABLED=false

# Provider identifiers (non-secret, safe to include)
NETLIFY_SITE_ID=<YOUR_NETLIFY_SITE_ID>
GITHUB_REPO_SLUG=kswhitlock9493-jpg/SR-AIbridge-

# Provider API tokens - MANAGED BY FORGE DOMINION (SDTF)
# These are auto-generated ephemeral tokens - DO NOT set manually
NETLIFY_AUTH_TOKEN=<FORGE_MANAGED>
GITHUB_TOKEN=<FORGE_MANAGED>

# ===== HXO (Hypshard-X Orchestrator) v1.9.7s =====
HXO_ENABLED=true
HXO_DEFAULT_SLO_MS=120000
HXO_SHARD_TIMEOUT_MS=15000
HXO_MAX_CONCURRENCY=64
HXO_MAX_SHARDS=1000000
HXO_AUTOSPLIT_P95_MS=8000
HXO_AUTOSPLIT_FACTOR=4
HXO_DB_PATH=bridge_backend/.hxo/checkpoints.db
HXO_ARTIFACTS_DIR=bridge_backend/.hxo/artifacts
HXO_ALLOW_CAPTAIN_VIEW=true
HXO_HEAL_DEPTH_LIMIT=5
HXO_ZERO_TRUST=true
HXO_PREDICTIVE_MODE=true
HXO_EVENT_CACHE_LIMIT=10000
HXO_QUANTUM_HASHING=true
HXO_ZDU_ENABLED=true
HXO_ALIR_ENABLED=true
HXO_CONSENSUS_MODE=HARMONIC
HXO_FEDERATION_TIMEOUT=5000
HXO_AUTO_AUDIT_AFTER_DEPLOY=true

# HXO Nexus Connectivity (1+1=âˆž Paradigm)
HXO_NEXUS_ENABLED=true
HXO_RECURSION_LIMIT=5
HYPSHARD_ENABLED=true
HYPSHARD_BALANCE_INTERVAL=60
HYPSHARD_MIN_THRESHOLD=1000
HYPSHARD_MAX_THRESHOLD=900000
QEH_ENTROPY_POOL_SIZE=256

# ===== ARIE (Autonomous Repository Integrity Engine) v1.9.7s =====
ARIE_SCHEDULE_ENABLED=false
ARIE_SCHEDULE_INTERVAL_HOURS=12
ARIE_RUN_ON_DEPLOY=true
ARIE_ADMIRAL_ONLY_APPLY=true
ARIE_TRUTH_MANDATORY=true

# ===== Umbra Cognitive Stack v1.9.7s =====
UMBRA_ENABLED=true
UMBRA_MEMORY_ENABLED=true
UMBRA_ECHO_ENABLED=true
UMBRA_TRAIN_INTERVAL=15m
UMBRA_REFLECT_ON_COMMIT=true

# ===== Umbra + Netlify Integration v1.9.7s =====
UMBRA_NETLIFY_SYNC=true
NETLIFY_OPTIONAL_PREVIEW_CHECKS=true

# ===== Umbra Unified Triage Mesh (v1.9.7s) =====
UMBRA_ALLOW_HEAL=false
UMBRA_ALLOW_UNVERIFIED_WEBHOOKS=false
UMBRA_HEALTH_ERROR_THRESHOLD=5
UMBRA_HEALTH_WARN_THRESHOLD=2
UMBRA_PARITY_STRICT=true
UMBRA_RBAC_MIN_ROLE=captain

# Webhook secrets - MANAGED BY FORGE DOMINION
RENDER_WEBHOOK_SECRET=<FORGE_MANAGED>
NETLIFY_DEPLOY_WEBHOOK_SECRET=<FORGE_MANAGED>
GITHUB_WEBHOOK_SECRET=<FORGE_MANAGED>

# ===== Reflex + Chimera Recovery (v1.9.7s) =====
REFLEX_AUTOMERGE_ENABLED=true
CHIMERA_FALLBACK_UMBRA=true

# ===== Bridge Resonance =====
# System harmony metric (0.0 - 1.0) for component synchronization
BRIDGE_RESONANCE=0.99

# ===== Bridge Sovereignty Guard =====
# Controls the readiness gate that validates system health before serving requests
# Enable/disable the sovereignty guard (true/false)
SOVEREIGNTY_ENABLED=true
# Maximum time to wait for sovereignty before serving in degraded mode (seconds)
SOVEREIGNTY_TIMEOUT=30.0
# Minimum thresholds for production readiness (0.0 - 1.0)
# For aspirational "perfect sovereignty", set all to 0.99
# Production defaults balance quality with deployability
SOVEREIGNTY_MIN_PERFECTION=0.75   # Minimum % of engines operational
SOVEREIGNTY_MIN_HARMONY=0.85       # Minimum inter-engine coordination score
SOVEREIGNTY_MIN_RESONANCE=0.70     # Minimum system-wide coherence
SOVEREIGNTY_MIN_OVERALL=0.75       # Minimum combined sovereignty score

# ===== Auth Session Configuration =====
# Session expiry time in seconds (default: 3600 = 1 hour)
AUTH_SESSION_EXPIRY_SECONDS=3600

# ==========================================================================================
# END OF CONFIGURATION
# 
# Remember: Run `bash runtime/pre-deploy.dominion.sh` before deployment to mint tokens
# All secrets are ephemeral and managed by the Sovereign Dominion Token Forge
# ==========================================================================================
